<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="yes" name="apple-touch-fullscreen"><meta content="telephone=no,email=no" name="format-detection"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon"><link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet"><script src="https://use.fontawesome.com/adaf0e149c.js"></script><link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.6.0/styles/monokai_sublime.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/post.css"><link rel="stylesheet" href="/css/markdown-github.css"><title>林水溶的博客</title><script src="/js/googleAnalytics.js"></script></head><body><div id="postContainer"><div id="postTop"><h4 id="logo">Life Is Short</h4><br><br><h2 id="postTitle">12行代码实现一个Web版Markdown编辑器: 实时预览</h2><br><span aria-hidden="true" class="postTime fa fa-calendar">2017-3-16</span><span aria-hidden="true" class="postTags fa fa-tags">&nbsp;前端</span><span aria-hidden="true" class="postTags fa fa-tags">&nbsp;轮子</span><br><br></div><section id="articleDiv"><p><p>首先，我承认标题党的嫌疑是逃不掉的了．．．但是，诸君请继续看下去，就会发现还是有干货的</p></p>
<p><hr></p>
<p><blockquote></p>
<p><p><strong>源码</strong>：<a href="https://github.com/shuiRong/markdownEditor" target="_blank" rel="external">https://github.com/shuiRong/markdownEditor</a> <strong>Demo</strong>：<a href="https://shuirong.github.io/src/" target="_blank" rel="external">https://shuirong.github.io/src/</a></p><br></blockquote></p>
<p><p>写这个Markdown编辑器的<strong>难点有两个</strong>：<br>1.对文本进行Markdown语法的解析 2.实时检测页面文本变化．</p></p>
<ul><br><li>针对１，我在Gayhub上找到了<a href="https://github.com/chjj/marked" target="_blank" rel="external">markedJS</a>，看README就能很快地上手．</li><br><li>针对２，我选择的是<a href="https://cn.vuejs.org/" target="_blank" rel="external">VueJS</a>，因为我看中了她的双向绑定特性（当然数据和视图间的单向绑定就够了）．而且VueJS非常轻量，简单容易上手不说，中文文档简直业界良心．<br><strong>注：</strong>代码高亮部分我用的是<a href="https://highlightjs.org/" target="_blank" rel="external">highlight.js</a></li><br></ul><br><p><em>index.html</em></p><br><pre><code>&lt;div id=&#39;container&#39;&gt;<br>        &lt;textarea id=&#39;editor&#39; v-model=&#39;text&#39;&gt;<br>        &lt;/textarea&gt;<br>        &lt;div id=&#39;server&#39; v-html=&#39;markedText&#39;&gt;<br>        &lt;/div&gt;<br>    &lt;/div&gt;<br></code></pre><p><em>main.js</em></p><br><pre><code>var vm = new Vue({<br>    el: &#39;#container&#39;,<br>    data: {<br>        text: &#39;&#39;<br>    },<br>    computed: {<br>        markedText: function(){<br>            return marked(this.text);<br>        }<br>    }<br>});<br></code></pre><p><strong>核心部分就是这些了．再自定义下相关CSS,一个支持实时预览的Markdown编辑器就搞定了．</strong></p><br><hr><br><p>这么简单？当然不能这么说．因为最难的markdown语法解析和实时预览部分引用了别处的代码．如果都是自己实现的话，够喝一壶的了．</p><br><p>既然说到这里，那就聊聊MD语法解析和数据的双向绑定的实现．</p><br><ul><br><li>MD语法解析：简单实现玩玩的话，基本的HTML/CSS/JS，主要正则玩的溜就够了．</li><br><li>实时预览的重点在于数据和视图间的单向绑定．进一步介绍看<a href="https://zhuanlan.zhihu.com/p/25464162" target="_blank" rel="external">这里</a></li><br></ul>
</section></div><script src="/js/jquery.min.js"></script><script src="/js/highlight.min.js"></script><script src="/js/start.js"></script></body></html>